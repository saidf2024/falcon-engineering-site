<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tank Turret SPA</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: sans-serif;
      background: #e0e0e0;
    }

    .turret {
      position: fixed;
      left: 40px;
      bottom: 30%;
      width: 100px;
      height: 100px;
    }

    .turret-base {
      width: 60px;
      height: 60px;
      background: #555;
      border-radius: 50%;
      position: absolute;
      bottom: 0;
      left: 0;
      box-shadow: inset 0 0 5px #000;
    }

    .turret-barrel {
      width: 80px;
      height: 14px;
      background: #333;
      position: absolute;
      top: 23px;
      left: 25px;
      transform-origin: left center;
      border-radius: 5px;
      z-index: 2;
    }

    .nav-bar {
      position: fixed;
      top: 50%;
      right: 20px;
      display: flex;
      flex-direction: column;
      transform: translateY(-50%);
      gap: 10px;
    }

    .nav-bar button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      background: #333;
      color: #fff;
      border-radius: 4px;
      transition: background 0.3s;
    }

    .nav-bar button:hover {
      background: #555;
    }

    .projectile {
      position: fixed;
      width: 10px;
      height: 10px;
      background: red;
      border-radius: 50%;
      display: none;
      z-index: 10;
    }

    .smoke {
      position: fixed;
      width: 10px;
      height: 10px;
      background: rgba(50, 50, 50, 0.4);
      border-radius: 50%;
      pointer-events: none;
      animation: fadeOut 0.5s forwards;
      z-index: 5;
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
        transform: scale(1.5);
      }
    }

    .muzzle-flash, .impact-spark {
      position: fixed;
      width: 20px;
      height: 20px;
      background: yellow;
      border-radius: 50%;
      opacity: 0;
      pointer-events: none;
      z-index: 20;
      box-shadow: 0 0 20px 10px yellow;
    }

    .page-content {
      position: absolute;
      top: 20px;
      left: 140px;
      max-width: 600px;
      padding: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <div class="turret">
    <div class="turret-base"></div>
    <div class="turret-barrel" id="barrel"></div>
  </div>

  <div class="nav-bar">
    <button data-page="about">About</button>
    <button data-page="projects">Projects</button>
    <button data-page="contact">Contact</button>
  </div>

  <div class="projectile" id="projectile"></div>
  <div class="muzzle-flash" id="muzzle"></div>
  <div class="impact-spark" id="spark"></div>

  <div class="page-content" id="pageContent">
    <h1>Welcome</h1>
    <p>Click a button to navigate.</p>
  </div>

  <audio id="fireSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9c6ff5f639.mp3?filename=gun-shot-140236.mp3"></audio>

  <script>
    const barrel = document.getElementById("barrel");
    const projectile = document.getElementById("projectile");
    const pageContent = document.getElementById("pageContent");
    const fireSound = document.getElementById("fireSound");
    const muzzle = document.getElementById("muzzle");
    const spark = document.getElementById("spark");

    function getBarrelTip() {
      const rect = barrel.getBoundingClientRect();
      const angle = parseFloat(barrel.style.transform.replace(/[^\d.-]/g, '')) || 0;
      const x = rect.left + Math.cos(angle) * barrel.offsetWidth;
      const y = rect.top + rect.height / 2 + Math.sin(angle) * barrel.offsetWidth;
      return { x, y, angle };
    }

    function getBarrelBase() {
      const rect = barrel.getBoundingClientRect();
      return {
        x: rect.left,
        y: rect.top + rect.height / 2
      };
    }

    window.addEventListener("mousemove", (e) => {
      const { x, y } = getBarrelBase();
      const dx = e.clientX - x;
      const dy = e.clientY - y;
      const angle = Math.atan2(dy, dx);
      barrel.style.transform = `rotate(${angle}rad)`;
    });

    function fireProjectile(targetButton, pageName) {
      const { x: startX, y: startY, angle } = getBarrelTip();

      const endRect = targetButton.getBoundingClientRect();
      const endX = endRect.left + endRect.width / 2;
      const endY = endRect.top + endRect.height / 2;

      projectile.style.left = `${startX}px`;
      projectile.style.top = `${startY}px`;
      projectile.style.display = "block";

      // Muzzle flash
      muzzle.style.left = `${startX - 10}px`;
      muzzle.style.top = `${startY - 10}px`;
      muzzle.style.opacity = 1;
      setTimeout(() => (muzzle.style.opacity = 0), 100);

      // Play sound
      fireSound.currentTime = 0;
      fireSound.play();

      const dx = endX - startX;
      const dy = endY - startY;
      const steps = 40;
      let step = 0;

      const interval = setInterval(() => {
        step++;
        const progress = step / steps;
        const px = startX + dx * progress;
        const py = startY + dy * progress;
        projectile.style.left = `${px}px`;
        projectile.style.top = `${py}px`;

        // Smoke puff
        const smoke = document.createElement("div");
        smoke.className = "smoke";
        smoke.style.left = `${px + Math.random() * 4 - 2}px`;
        smoke.style.top = `${py + Math.random() * 4 - 2}px`;
        document.body.appendChild(smoke);
        setTimeout(() => smoke.remove(), 500);

        if (step >= steps) {
          clearInterval(interval);
          projectile.style.display = "none";

          // Impact
          spark.style.left = `${endX - 10}px`;
          spark.style.top = `${endY - 10}px`;
          spark.style.opacity = 1;
          setTimeout(() => (spark.style.opacity = 0), 150);

          loadPage(pageName);
        }
      }, 16);
    }

    document.querySelectorAll(".nav-bar button").forEach(button => {
      button.addEventListener("click", (e) => {
        fireProjectile(button, button.dataset.page);
      });
    });

    function loadPage(pageName) {
      switch (pageName) {
        case "about":
          pageContent.innerHTML = "<h1>About</h1><p>This is the About section. Your background, skills, and mission go here.</p>";
          break;
        case "projects":
          pageContent.innerHTML = "<h1>Projects</h1><p>These are some projects I've worked on. Add portfolio links or screenshots here.</p>";
          break;
        case "contact":
          pageContent.innerHTML = "<h1>Contact</h1><p>Reach out at: <a href='mailto:you@example.com'>you@example.com</a></p>";
          break;
        default:
          pageContent.innerHTML = "<h1>Welcome</h1><p>Click a button to navigate.</p>";
      }
    }
  </script>
</body>
</html>
